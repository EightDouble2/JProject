{"remainingRequest":"/Users/johnnyhao/WorkSpace/IDEAProjects/JShop/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/johnnyhao/WorkSpace/IDEAProjects/JShop/frontend/src/views/profile/password.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/johnnyhao/WorkSpace/IDEAProjects/JShop/frontend/src/views/profile/password.vue","mtime":1581658948772},{"path":"/Users/johnnyhao/WorkSpace/IDEAProjects/JShop/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/johnnyhao/WorkSpace/IDEAProjects/JShop/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/johnnyhao/WorkSpace/IDEAProjects/JShop/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/johnnyhao/WorkSpace/IDEAProjects/JShop/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { modifyPassword } from '@/api/profile'\n\nexport default {\n  name: 'ProfilePassword',\n  data() {\n    var validateOldPassword = (rule, value, callback) => {\n      if (value === '') {\n        callback(new Error('请输入旧密码'))\n      } else {\n        callback()\n      }\n    }\n\n    var validateNewPassword = (rule, value, callback) => {\n      if (value === '') {\n        callback(new Error('请输入新密码'))\n      } else {\n        if (this.form.confirmPassword !== '') {\n          this.$refs.form.validateField('confirmPassword')\n        }\n        callback()\n      }\n    }\n\n    var validateConfirmPassword = (rule, value, callback) => {\n      if (value === '') {\n        callback(new Error('请再次输入密码'))\n      } else if (value !== this.form.newPassword) {\n        callback(new Error('两次输入密码不一致!'))\n      } else {\n        callback()\n      }\n    }\n\n    return {\n      formLoading: false,\n      form: {\n        username: this.$store.getters.name,\n        oldPassword: '',\n        newPassword: '',\n        confirmPassword: ''\n      },\n      rules: {\n        oldPassword: [\n          { validator: validateOldPassword, trigger: 'blur' }\n        ],\n        newPassword: [\n          { validator: validateNewPassword, trigger: 'blur' }\n        ],\n        confirmPassword: [\n          { validator: validateConfirmPassword, trigger: 'blur' }\n        ]\n      }\n    }\n  },\n  methods: {\n    onSubmit() {\n      this.$refs['form'].validate((valid) => {\n        if (valid) {\n          this.formLoading = true\n          modifyPassword(this.form).then(response => {\n            this.formLoading = false\n            this.$message({\n              message: response.message,\n              type: 'success'\n            })\n          }).catch(() => {\n            this.formLoading = false\n          })\n        } else {\n          console.log('error submit!!')\n          return false\n        }\n      })\n    }\n  }\n}\n",null]}