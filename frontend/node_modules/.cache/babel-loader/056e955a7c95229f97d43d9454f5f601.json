{"remainingRequest":"/Users/johnnyhao/WorkSpace/IDEAProjects/JShop/frontend/node_modules/babel-loader/lib/index.js!/Users/johnnyhao/WorkSpace/IDEAProjects/JShop/frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/johnnyhao/WorkSpace/IDEAProjects/JShop/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/johnnyhao/WorkSpace/IDEAProjects/JShop/frontend/src/views/profile/password.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/johnnyhao/WorkSpace/IDEAProjects/JShop/frontend/src/views/profile/password.vue","mtime":1581658948772},{"path":"/Users/johnnyhao/WorkSpace/IDEAProjects/JShop/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/johnnyhao/WorkSpace/IDEAProjects/JShop/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/johnnyhao/WorkSpace/IDEAProjects/JShop/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/johnnyhao/WorkSpace/IDEAProjects/JShop/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"core-js/modules/es6.function.name\");\n\nvar _profile = require(\"@/api/profile\");\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar _default = {\n  name: 'ProfilePassword',\n  data: function data() {\n    var _this = this;\n\n    var validateOldPassword = function validateOldPassword(rule, value, callback) {\n      if (value === '') {\n        callback(new Error('请输入旧密码'));\n      } else {\n        callback();\n      }\n    };\n\n    var validateNewPassword = function validateNewPassword(rule, value, callback) {\n      if (value === '') {\n        callback(new Error('请输入新密码'));\n      } else {\n        if (_this.form.confirmPassword !== '') {\n          _this.$refs.form.validateField('confirmPassword');\n        }\n\n        callback();\n      }\n    };\n\n    var validateConfirmPassword = function validateConfirmPassword(rule, value, callback) {\n      if (value === '') {\n        callback(new Error('请再次输入密码'));\n      } else if (value !== _this.form.newPassword) {\n        callback(new Error('两次输入密码不一致!'));\n      } else {\n        callback();\n      }\n    };\n\n    return {\n      formLoading: false,\n      form: {\n        username: this.$store.getters.name,\n        oldPassword: '',\n        newPassword: '',\n        confirmPassword: ''\n      },\n      rules: {\n        oldPassword: [{\n          validator: validateOldPassword,\n          trigger: 'blur'\n        }],\n        newPassword: [{\n          validator: validateNewPassword,\n          trigger: 'blur'\n        }],\n        confirmPassword: [{\n          validator: validateConfirmPassword,\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  methods: {\n    onSubmit: function onSubmit() {\n      var _this2 = this;\n\n      this.$refs['form'].validate(function (valid) {\n        if (valid) {\n          _this2.formLoading = true;\n          (0, _profile.modifyPassword)(_this2.form).then(function (response) {\n            _this2.formLoading = false;\n\n            _this2.$message({\n              message: response.message,\n              type: 'success'\n            });\n          }).catch(function () {\n            _this2.formLoading = false;\n          });\n        } else {\n          console.log('error submit!!');\n          return false;\n        }\n      });\n    }\n  }\n};\nexports.default = _default;",null]}